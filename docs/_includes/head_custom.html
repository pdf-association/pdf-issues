<!-- 
Any HTML added to this file will be inserted before the closing <head> tag. This might include additional <meta>, <link>, or <script> tags.
The <head> tag automatically includes a link to an existing favicon if you set favicon_ico to the corresponding path in your configuration, 
or if the path to the favicon is /favicon.ico.
-->
<!-- link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" --> 

<script>
var lastTimeout;

window.addEventListener("load", function() {
    var n = 0;
    var s = "";
    var iss = null;
    var iso = null;
    var p;

    var edits = document.getElementsByTagName('ins');
    for (n = 0, nEdits = edits.length; n < nEdits; n++) {
        if (edits[n].getAttribute("data-issue") != null) {
            iss = edits[n].getAttribute("data-issue").split(',');
            if (edits[n].getAttribute("data-iso") != null) {
                iso = edits[n].getAttribute("data-iso").split(',');
                if (iss.length != iso.length) {
                    console.log("Insertion data-issue and data-iso not the same length for " + obj.getAttribute("data-issue"));
                }
            }
        }
        s = "";
        for (let i in iss) {
            if (s != "") {
                s = s + ", "; /* add a gap between each URL */
            }
            if ((iso != null) && (iso.length > i)) {
                if (iso[i] == "approved") {
                    s = s + '<img src="../assets/Logo-ISO-small.png" alt="ISO approved" style="height:15px">&nbsp;';
                }
                else if (iso[i] == "submitted") {
                    s = s + '<img src="../assets/Logo-ISO-submitted-small.png" alt="ISO submitted" style="height:15px">&nbsp;';
                }
            }
            s = s + '<a href="https://github.com/pdf-association/pdf-issues/issues/' + iss[i] + '" target="_blank">Issue&nbsp;#' + iss[i] + '</a>';
        }
        edits[n].insertAdjacentHTML("beforebegin", "<span class=\"onlyprint\" style=\"font-family:cursive;font-size:small\"> [" + s + "] </span>");
    }

    var edits = document.getElementsByTagName('del');
    iso = null;
    for (n = 0, nEdits = edits.length; n < nEdits; n++) {
        if (edits[n].getAttribute("data-issue") != null) {
            iss = edits[n].getAttribute("data-issue").split(',');
            if (edits[n].getAttribute("data-iso") != null) {
                iso = edits[n].getAttribute("data-iso").split(',');
                if ((iso != null) && (iss.length != iso.length)) {
                    console.log("Deletion data-issue and data-iso not the same length for " + obj.getAttribute("data-issue"));
                }
            }
        }
        s = "";
        for (let i in iss) {
            if (s != "") {
                s = s + ", "; /* add a gap between each URL */
            }
            if ((iso != null) && (iso.length > i)) {
                if (iso[i] == "approved") {
                    s = s + '<img src="../assets/Logo-ISO-small.png" alt="ISO approved" style="height:15px">&nbsp;';
                }
                else if (iso[i] == "submitted") {
                    s = s + '<img src="../assets/Logo-ISO-submitted-small.png" alt="ISO submitted" style="height:15px">&nbsp;';
                }
            }
            s = s + '<a href="https://github.com/pdf-association/pdf-issues/issues/' + iss[i] + '" target="_blank">Issue&nbsp;#' + iss[i] + '</a>';
        }
        edits[n].insertAdjacentHTML("beforebegin", "<span class=\"onlyprint\" style=\"font-family:cursive;font-size:small\"> [" + s + "] </span>");
    }
});

function mouseEnter(obj) {
    var iss = null;
    var iso = null;
    clearTimeout(lastTimeout);
    if (obj.getAttribute("data-issue") != null) {
        iss = obj.getAttribute("data-issue").split(',');
        if (obj.getAttribute("data-iso") != null) {
            iso = obj.getAttribute("data-iso").split(',');
            if ((iso != null) && (iss.length != iso.length)) {
                console.log("data-issue and data-iso not the same length for " + obj.getAttribute("data-issue"));
            }
        }
    }
    var s = "";
    /* Iterate over comma-separated issue numbers */
    for (let i in iss) {
        if (s != "") {
            s = s + "<br\>"; /* add a linebreak between each URL */
        }
        if ((iso != null) && (iso.length > i)) {
            if (iso[i] == "approved") {
                s = s + '<img src="../assets/Logo-ISO-small.png" alt="ISO approved" style="height:15px">&nbsp;';
            }
            else if (iso[i] == "submitted") {
                s = s + '<img src="../assets/Logo-ISO-submitted-small.png" alt="ISO submitted" style="height:15px">&nbsp;';
            }
        }
        s = s + '<a href="https://github.com/pdf-association/pdf-issues/issues/' + iss[i] + '" target="_blank">Issue&nbsp;#' + iss[i] + '</a>';
    }
    var trg = document.getElementById("issuelink");
    trg.innerHTML = s;
    var box = obj.getBoundingClientRect();
    trg.style.left = Math.max(0, (box.left - 80)) + 'px';
    trg.style.top  = Math.max(0, (box.top - 20)) + 'px';
    trg.style.visibility = 'visible';
    lastTimeout = setTimeout(hideIssue, 3000);
}

function hideIssue() { /* after 3 second timeout */
    var trg = document.getElementById("issuelink");
    trg.style.visibility = 'hidden';
}
</script>
